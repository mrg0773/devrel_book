-- –§–∏–ª—å—Ç—Ä –¥–ª—è –∑–∞–º–µ–Ω—ã emoji –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ PDF

local emoji_map = {
  ["‚úÖ"] = "[+]",
  ["‚ùå"] = "[-]",
  ["‚ö†Ô∏è"] = "[!]",
  ["‚ö†"] = "[!]",  -- warning –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
  ["üìä"] = "[STAT]",
  ["üéØ"] = "[GOAL]",
  ["üí°"] = "[TIP]",
  ["üî•"] = "[HOT]",
  ["‚≠ê"] = "*",              -- –∑–≤–µ–∑–¥–∞ (–∑–∞–º–µ–Ω—è–µ–º –Ω–∞ –ø—Ä–æ—Å—Ç—É—é)
  ["‚òÖ"] = "*",               -- —á–µ—Ä–Ω–∞—è –∑–≤–µ–∑–¥–∞
  ["üìù"] = "[NOTE]",
  ["‚úçÔ∏è"] = "[WRITE]",         -- —Ä—É–∫–∞ –ø–∏—à–µ—Ç —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º
  ["‚úç"] = "[WRITE]",          -- —Ä—É–∫–∞ –ø–∏—à–µ—Ç –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
  ["üöÄ"] = "[START]",
  ["üéâ"] = "[SUCCESS]",
  ["üíº"] = "[WORK]",
  ["üìà"] = "[GROWTH]",
  ["üîß"] = "[TOOL]",
  ["üìö"] = "[BOOK]",
  ["üìÑ"] = "",               -- —Å—Ç—Ä–∞–Ω–∏—Ü–∞/–¥–æ–∫—É–º–µ–Ω—Ç - —É–±–∏—Ä–∞–µ–º, –∏–∑–±—ã—Ç–æ—á–Ω–æ
  ["üéì"] = "[EDU]",
  ["üòä"] = ":)",             -- —É–ª—ã–±–∫–∞
  ["üòâ"] = ";)",             -- –ø–æ–¥–º–∏–≥–∏–≤–∞–Ω–∏–µ
  ["ü§î"] = "(?)",            -- –∑–∞–¥—É–º—á–∏–≤–æ—Å—Ç—å
  ["üëâ"] = "->",             -- —É–∫–∞–∑–∞—Ç–µ–ª—å
  ["ü§ù"] = "[PARTNER]",       -- —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ/–ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–æ
  ["üëÅÔ∏è"] = "[VIEW]",         -- –≥–ª–∞–∑ —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º
  ["üëÅ"] = "[VIEW]",          -- –≥–ª–∞–∑ –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
  ["üß†"] = "[BRAIN]",         -- –º–æ–∑–≥/–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç
  ["üü¢"] = "[OK]",           -- –∑–µ–ª–µ–Ω—ã–π –∫—Ä—É–≥
  ["üü°"] = "[!]",            -- –∂–µ–ª—Ç—ã–π –∫—Ä—É–≥ (–±—ã–ª–æ [WARN], –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ [!])
  ["üî¥"] = "[ERR]",          -- –∫—Ä–∞—Å–Ω—ã–π –∫—Ä—É–≥
  ["‚ö™"] = "[ ]",             -- –±–µ–ª—ã–π –∫—Ä—É–≥
  ["‚ö´"] = "[X]",             -- —á–µ—Ä–Ω—ã–π –∫—Ä—É–≥
  ["‚≠ï"] = "( )",             -- –±–æ–ª—å—à–æ–π –∫—Ä—É–≥
  ["üë•"] = "[PEOPLE]",
  ["üí¨"] = "[MSG]",          -- —Å–æ–æ–±—â–µ–Ω–∏–µ/—Ä–µ—á—å
  ["üì∏"] = "[PHOTO]",        -- –∫–∞–º–µ—Ä–∞
  ["üìû"] = "[PHONE]",        -- —Ç–µ–ª–µ—Ñ–æ–Ω
  ["üé•"] = "[VIDEO]",        -- –≤–∏–¥–µ–æ
  ["üì∞"] = "[NEWS]",         -- –≥–∞–∑–µ—Ç–∞/–Ω–æ–≤–æ—Å—Ç–∏
  ["üêõ"] = "[BUG]",          -- –±–∞–≥
  ["üîó"] = "[LINK]",         -- —Å—Å—ã–ª–∫–∞
  ["üîÑ"] = "[SYNC]",         -- –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
  ["üëî"] = "[FORMAL]",       -- –≥–∞–ª—Å—Ç—É–∫/—Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å
  ["üí∞"] = "[MONEY]",
  ["‚è∞"] = "[TIME]",
  ["‚è±Ô∏è"] = "[TIME]",         -- —Ç–∞–π–º–µ—Ä —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º
  ["‚è±"] = "[TIME]",          -- —Ç–∞–π–º–µ—Ä –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
  ["üèÜ"] = "[WIN]",
  ["‚ö°"] = "[FAST]",          -- –º–æ–ª–Ω–∏—è/–±—ã—Å—Ç—Ä–æ
  ["‚ÇΩ"] = "—Ä—É–±.",  -- —Å–∏–º–≤–æ–ª —Ä—É–±–ª—è
  
  -- Unicode —Å–∏–º–≤–æ–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ PDF
  ["‚Üí"] = "->",              -- —Å—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ
  ["‚Üê"] = "<-",              -- —Å—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ
  ["‚Üî"] = "<->",             -- –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å—Ç—Ä–µ–ª–∫–∞
  ["‚Üì"] = "v",               -- —Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑
  ["‚Üë"] = "^",               -- —Å—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö
  ["‚Üª"] = " (cycle) ",       -- —Å—Ç—Ä–µ–ª–∫–∞ –ø–æ –∫—Ä—É–≥—É
  ["√ó"] = "x",               -- —É–º–Ω–æ–∂–µ–Ω–∏–µ
  ["‚Ä¢"] = "*",               -- –±—É–ª–ª–µ—Ç
  ["‚ò∫"] = ":)",              -- –ø—Ä–æ—Å—Ç–æ–π —Å–º–∞–π–ª–∏–∫
  ["‚Äî"] = "--",              -- –¥–ª–∏–Ω–Ω–æ–µ —Ç–∏—Ä–µ (em dash)
  ["‚Äì"] = "-",               -- —Å—Ä–µ–¥–Ω–µ–µ —Ç–∏—Ä–µ (en dash)
  ["‚â†"] = "!=",              -- –Ω–µ —Ä–∞–≤–Ω–æ
  ["‚âà"] = "~",               -- –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–≤–Ω–æ
  ["‚â§"] = "<=",              -- –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
  ["‚â•"] = ">=",              -- –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
  ["¬±"] = "+/-",             -- –ø–ª—é—Å-–º–∏–Ω—É—Å
  ["‚Ä¶"] = "..."              -- –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ
}

function Str(el)
  local text = el.text
  
  -- –ó–∞–º–µ–Ω—è–µ–º –∫–∞–∂–¥—ã–π emoji
  for emoji, replacement in pairs(emoji_map) do
    text = text:gsub(emoji, replacement)
  end
  
  if text ~= el.text then
    return pandoc.Str(text)
  end
  
  return el
end

-- –¢–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º Plain —ç–ª–µ–º–µ–Ω—Ç—ã (–≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö)
function Plain(el)
  return pandoc.walk_block(el, {Str = Str})
end

-- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º Para —ç–ª–µ–º–µ–Ω—Ç—ã
function Para(el)
  return pandoc.walk_block(el, {Str = Str})
end

-- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º Strong —ç–ª–µ–º–µ–Ω—Ç—ã (–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç)
function Strong(el)
  return pandoc.walk_inline(el, {Str = Str})
end

-- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º Emph —ç–ª–µ–º–µ–Ω—Ç—ã (–∫—É—Ä—Å–∏–≤)
function Emph(el)
  return pandoc.walk_inline(el, {Str = Str})
end

return {{
  Str = Str,
  Plain = Plain,
  Para = Para,
  Strong = Strong,
  Emph = Emph
}}

